\usepackage{libertine}
\usepackage{amssymb}
\usepackage{ulem}
\usepackage{../macro}

\newcommand{\xbar}[1]{\ensuremath{\overline{\textrm{#1}}}}

\usepackage[table,dvipsnames]{xcolor}
\usepackage{graphicx}
\usepackage{adjustbox}

\newcommand{\SIZE}{10pt}
%%% Trees
\usepackage[linguistics]{forest}
\usepackage{tikz}
\usetikzlibrary{trees}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{shapes.geometric, shapes.misc}

% \newcommand{\}{def}

\tikzset{
  rect/.style={
      shape border rotate=0,
      regular polygon,
      regular polygon sides=4,
      % minimum height=1em,
      inner sep=0
    },
  mtriangle/.style={
      shape border rotate=0,
      regular polygon,
      regular polygon sides=3,
      % minimum height=1em,
      text width=\SIZE,
      inner sep=0
    },
  allRed/.style={
      draw=red,
      text=red,
    },
  allBlue/.style={
    draw=blue,
    text=blue,
  },
  allGreen/.style={
    draw=green,
    text=green,
  },
  allOrange/.style={
    draw=orange,
    text=orange,
  },
  allBlack/.style={
    % draw=blue,
    text=black,
  },
  andNode/.style={ allBlue, mtriangle },
  orNode/.style={ allOrange, mtriangle },
  okNode/.style={ allGreen, circle, },
  koNode/.style={ allRed, circle, },
  atomNode/.style={ allBlack, rect, },
  distances/.style={level distance=13mm, sibling distance=13mm}
}

\newcommand{\iText}[1]{\adjustbox{max width=\SIZE}{\small{#1}}}

\newcommand{\orN}{\ensuremath{Or}}   % or node
\newcommand{\andN}{\ensuremath{And}} % and node
\newcommand{\okN}{\ensuremath{OK}}
\newcommand{\cutN}{\ensuremath{!}}
\newcommand{\koN}{\ensuremath{KO}}
\newcommand{\deadN}{\ensuremath{Dead}}

% ARGUMEMTS: NODE TYPE, NODE TXT, NODE TAG
\newcommand{\nodebuild}[3]{
  node[#1](#2){\phantom{A}}                 %
  node[#1,draw=none] at (#2.center){#3} %
  node[#1]at (#2.center){\phantom{A}}                 %
}

\newcommand{\nOK}[1]{ \nodebuild{okNode}{#1}{\okN} }
\newcommand{\nKO}[1]{ \nodebuild{koNode}{#1}{\koN} }
\newcommand{\nDead}[1]{ \nodebuild{koNode}{#1}{\deadN} }

\newcommand{\nOr}[1]{ \nodebuild{orNode}{#1}{\orN} }
\newcommand{\nAnd}[1]{ \nodebuild{andNode}{#1}{\andN} }
\newcommand{\nCut}[1]{ \nodebuild{atomNode}{#1}{\cutN} }
\newcommand{\nCall}[2]{ \nodebuild{atomNode}{#1}{#2} }
\newcommand{\nAny}[1]{ node(#1)  {\iText{\dots}} }




% \newcommand{\nOK}[1]{\node[text=green] at (#1.center) {\okN}}
% \newcommand{\nOK}[1]{\node[text=green] at (#1.center) {\okN}}

